<h3 class="card-header-style">CUSTOMER</h3>
<mat-dialog-content>
  <div class="card-body">
    <form [formGroup]="userForm" novalidate>
      <input type="hidden" [(ngModel)]="userData.id" formControlName="id" />
      <div class="row">
        <div class="form-group col-md-4">
          <mat-form-field class="example-full-width">
            <input matInput type="text" formControlName="f_name" placeholder="First Name" maxlength="20"
              (keypress)="handleSpace($event)" [(ngModel)]="userData.first_name" autocomplete="off" [readonly]="userRole==4 || userRole==5" appBlockCopyPaste
              required>
          </mat-form-field>
          <div *ngIf="f_name.invalid && (f_name.dirty || f_name.touched)" class="reqired-field">
            <div *ngIf="f_name.errors.required">
              Required Field
            </div>
            <div *ngIf="f_name.errors.pattern">
              Invalid name
            </div>
          </div>
        </div>

        <div class="form-group col-md-4">
          <mat-form-field class="example-full-width">
            <input matInput type="text" [(ngModel)]="userData.last_name" formControlName="l_name" id="laname"
              placeholder="Last Name" maxlength="20" [readonly]="userRole==4 || userRole==5" autocomplete="off"
              appBlockCopyPaste>
          </mat-form-field>
          <div *ngIf="l_name.invalid && (l_name.dirty || l_name.touched)" class="reqired-field">
            <div *ngIf="l_name.errors.pattern">
              Invalid name
            </div>
          </div>
        </div>

        <div class="form-group col-md-4">
          <mat-form-field class="example-full-width">
            <input matInput type="email" maxlength="40" [(ngModel)]="emailId" formControlName="email" id="email"
              autocomplete="new-email" placeholder="Email" [readonly]="userRole==4  || userRole==5" required>
          </mat-form-field>
          <div *ngIf="email.invalid && (email.dirty || email.touched)" class="reqired-field">
            <div *ngIf="email.errors.required">
              Required Field
            </div>
            <div *ngIf="email.errors.pattern">
              Email must be a valid email address
            </div>
          </div>
        </div>

        <div class="form-group col-md-4">
          <mat-form-field class="example-full-width">
            <input matInput type="text" [(ngModel)]="userData.username" (keydown.space)="$event.preventDefault();"
              formControlName="username" maxlength="20" id="username" placeholder="Username" required autocomplete="off"
              appBlockCopyPaste readonly>
          </mat-form-field>
          <div *ngIf="username.invalid && (username.dirty || username.touched)" class="reqired-field">
            <div *ngIf="username.errors.required">
              Required Field
            </div>
            <div *ngIf="username.errors.minlength">
              Username must be at least 8 characters long.
            </div>
          </div>
        </div>

        <!-- <div class="form-group col-md-4" *ngIf="userRole!=4 && userRole!=5">
          <mat-form-field>
            <mat-label>Country</mat-label>
            <mat-select formControlName="country" (selectionChange)="getCountryCode($event)"
              [(ngModel)]="userData.country_id" required>
              <mat-option *ngFor='let country of countryList' [value]="country.id">
                {{ country.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div> -->
        <!-- *ngIf="userRole==4 || userRole==5" -->
        <!-- <div class="form-group col-md-4" *ngIf="userRole==4 || userRole==5"> -->
        <div class="form-group col-md-4" *ngIf="ReadCountry">
           <ejs-dropdownlist id="dldelement" [floatLabelType]="'Auto'" formControlName="country" style="width: 63%;" [dataSource]='countryList' [fields]='fields' [(ngModel)]="userData.country_id" [readonly]="ReadCountry"
            [popupHeight]='popupHeight' [popupWidth]='popupWidth'  [placeholder]="placeholder" allowFiltering=true>
          </ejs-dropdownlist>
          <!-- <mat-form-field>
            <mat-label>Country</mat-label>
            <mat-select formControlName="country" [(ngModel)]="userData.country_id" disabled required [disableOptionCentering]="true" #select1 placeholder="Auto Focus">
              <mat-select-filter *ngIf="select1.focused" [array]="countryList" [displayMember]="'name'" (filteredReturn)="filterCountry = $event" allowFiltering=true></mat-select-filter>
              <mat-option *ngFor='let country of filterCountry' [value]="country.id">
                {{ country.name }}
              </mat-option>
            </mat-select>
          </mat-form-field> -->
        </div>

        <div class="col-md-4" *ngIf="isState">
          <ejs-dropdownlist id="dldelement" [floatLabelType]="'Auto'" [readonly]="isState" formControlName="states" style="width: 63%;" [dataSource]='statesList' [fields]='fields6' [(ngModel)]="cust_state"
          [popupHeight]='popupHeight' [popupWidth]='popupWidth'  [placeholder]="placeholder6" allowFiltering=true>
        </ejs-dropdownlist>
          <!-- <mat-form-field>
            <mat-label>States</mat-label>
            <mat-select formControlName="states" [(ngModel)]="cust_state"
            disabled [disableOptionCentering]="true" #select1 placeholder="Auto Focus">
            <mat-select-filter *ngIf="select1.focused" [array]="statesList" [displayMember]="'state_name'" (filteredReturn)="filterState = $event" allowFiltering=true></mat-select-filter>
              <mat-option *ngFor='let state of filterState' [value]="state.id">
                {{ state.state_name }}
              </mat-option>
            </mat-select>
          </mat-form-field> -->
        </div>

        <div class="form-group col-md-4">
          <mat-form-field class="example-full-width">
            <input type="hidden" formControlName="country_code" [(ngModel)]="countryCode" />
            <input matInput type="text" [(ngModel)]="userData.mobile" (keypress)="commonService.numberOnly($event)"
              formControlName="mobile" id="mobile" placeholder="Mobile Number" minlength="10" maxlength="10"
              [readonly]="userRole==4  || userRole==5" autocomplete="off"  required>
            <span matPrefix>{{countryCode}}</span>
          </mat-form-field>
          <div *ngIf="mobile.invalid && (mobile.dirty || mobile.touched)" class="reqired-field">
            <div *ngIf="mobile.errors.required">
              Required Field
            </div>
            <div *ngIf="mobile.errors.pattern"> Number can not start with 0 and not less than 10 digits.</div>
          </div>
        </div>

       
        <div class="form-group col-md-4" *ngIf="userRole!=4 && userRole!=5" style="margin-top: -6px;" style="margin-top: -7px;">
          <ejs-dropdownlist id="dldelement" [floatLabelType]="'Auto'" formControlName="time_zone" (filtering)="Timeremovedspace($event)" style="width: 63%;" [dataSource]='timeZone' [fields]='fields7' [(ngModel)]="userData.time_zone_id"
          [popupHeight]='popupHeight' [popupWidth]='popupWidth'  [placeholder]="placeholder8" allowFiltering=true>
        </ejs-dropdownlist>
          <!-- <mat-form-field>
            <mat-label>Time Zone</mat-label>
            <mat-select formControlName="time_zone" (openedChange)="HandleDropdownFilter('filterTimeZone',TimeZoneFilter)" [(ngModel)]="userData.time_zone_id" #select1>
              <mat-select-filter *ngIf="select1.focused" [array]="timeZone" [displayMember]="'gmtzone'" (filteredReturn)="filterTimeZone = $event"></mat-select-filter>
              <mat-option *ngFor='let zone of filterTimeZone' [value]="zone.id">{{zone.gmtzone}}</mat-option>
            </mat-select>
          </mat-form-field> -->
        </div>

       
        <div class="form-group col-md-4" *ngIf="userRole!=4 && userRole!=5">
          <mat-form-field>
            <mat-label> Account Status Label</mat-label>
            <mat-select formControlName="status" [(ngModel)]="userData.status">
              <mat-option value="0">Inactive</mat-option>
              <mat-option value="1">Active</mat-option>
              <!-- <mat-option [disabled]="invoiceStatus == '2'" value="2">Deleted</mat-option> -->
              <mat-option value="3">Expired</mat-option>
              <mat-option value="4">Suspended for Underpayment</mat-option>
              <mat-option value="5">Suspended for Litigation</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="form-group col-md-4" *ngIf="userRole!=4 && userRole!=5 && userRole !=3" style="margin-top: -7px;">
          <ejs-dropdownlist id="dldelement" [floatLabelType]="'Auto'" (filtering)="Managerremovedspace($event)" formControlName="account_manager" style="width: 63%;" [dataSource]='managerArr' [fields]='fields1' [(ngModel)]="userData.account_manager_id"
           [popupHeight]='popupHeight' [popupWidth]='popupWidth'  [placeholder]="placeholder1" allowFiltering=true>
         </ejs-dropdownlist>
         <!-- <mat-form-field>
           <mat-label>Account Manager</mat-label>
           <mat-select formControlName="account_manager" (openedChange)="HandleDropdownFilter('filterAccount',AcountFilter)" [(ngModel)]='userData.account_manager_id' #select1 required>
             <mat-select-filter *ngIf="select1.focused" [array]="managerArr" [displayMember]="'first_name'" (filteredReturn)="filterAccount = $event"></mat-select-filter>
             <mat-option *ngFor='let manager of  filterAccount' [value]="manager.id">{{manager.first_name}}
               {{manager.last_name}}</mat-option>
           </mat-select>
         </mat-form-field> -->
       </div>

       <div class="form-group col-md-4" *ngIf="userRole == 3" style="margin-top: -7px;">        
          <mat-form-field class="example-full-width">
            <input matInput type="text" placeholder="Account Manager" maxlength="20" value="{{accManager}}"
              autocomplete="off" [readonly]="userRole==3" appBlockCopyPaste
              required>
          </mat-form-field>          
     </div>

       <div class="form-group col-md-4" *ngIf="userRole!=4  && userRole!=5">
        <mat-form-field>
          <mat-label>Billing Type</mat-label>
          <mat-select formControlName="billing_type" [(ngModel)]="billingBind"
            (selectionChange)="showCreditBox($event)" disabled>
            <mat-option value="1">Prepaid</mat-option>
            <mat-option value="2">Postpaid</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-md-4" *ngIf="userRole!=4  && userRole!=5">
        <div class="form-group" *ngIf="isCredtiLimit">
          <mat-form-field class="example-full-width">
            <input matInput type="text" [(ngModel)]="userData.credit_limit" formControlName="credit_limit" 
              (keypress)="commonService.floatOnly($event)" placeholder="Credit Limit" (input)="checkPatternnn($event)" maxlength="9"
              autocomplete="off" appBlockCopyPaste required>
          </mat-form-field>
          <div *ngIf="credit_limit.invalid && (credit_limit.dirty || credit_limit.touched)" class="reqired-field">
            <div *ngIf="credit_limit.errors.required">
              Required Field
            </div>
            <div *ngIf="credit_limit.errors.pattern">
              Number Range should be 1 to 999999.99
            </div>
          </div> 
        </div>
      </div>

      <div class="form-group col-md-4" *ngIf="userRole!=4  && userRole!=5">
        <mat-form-field class="example-full-width">
          <input matInput type="text" [(ngModel)]="userData.balance" formControlName="balance" placeholder="Balance"
            (keypress)="commonService.floatOnly($event)" (keydown)="numberOnly($event)" autocomplete="off" readonly>
        </mat-form-field>
        <!-- <div *ngIf="balance.invalid && (balance.dirty || balance.touched)" class="reqired-field">
          <div *ngIf="balance.errors.required">
            Required Field
          </div>
        </div> -->
      </div>

      <!-- <div class="form-group col-md-4"  *ngIf="userRole!=4  && userRole!=5">
        <mat-form-field>
          <input matInput type="text" placeholder="Package Type" value={{packageType}} readonly>
        </mat-form-field>
      </div> -->

      <div class="form-group col-md-4" *ngIf="userRole!=4  && userRole!=5">
        <mat-form-field class="example-full-width">
          <input matInput type="text" [(ngModel)]="userData.advance_payment" (keypress)="commonService.floatOnly($event)"
            formControlName="advance_payment" placeholder="Advance Payment" autocomplete="off" (input)="checkPatternn($event)" maxlength="9"  required>
        </mat-form-field>
        <div *ngIf="advance_payment.invalid && (advance_payment.dirty || advance_payment.touched)" class="reqired-field">
          <div *ngIf="advance_payment.errors.required">
            Required Field
          </div>
          <div *ngIf="advance_payment.errors.pattern">
            Number Range should be 1 to 999999.99
          </div>
        </div>  
      </div>

      <div class="form-group col-md-3 mt-2" *ngIf = "showPbx && (userRole==0 || userRole==2 || userRole==3) && userData.country_code == '+91'">
        <mat-slide-toggle formControlName="isCircle" [(ngModel)]="userData.is_circle" (change)="isChnageCircle($event)">
         Circle
        </mat-slide-toggle>
        <!-- <mat-slide-toggle formControlName="isCircle"  [disabled]="userData.is_associate_with_bundle_plan == 1" [(ngModel)]="userData.is_circle" (change)="isChnageCircle($event)">
          Circle
         </mat-slide-toggle> -->
        <!-- <div class="mt-4"> -->
         <!-- <small *ngIf="userData.is_associate_with_bundle_plan == 1" style="color: blue; font-weight:600">*Note</small><small *ngIf="userData.is_associate_with_bundle_plan == 1"> Package is associate with </small> <small *ngIf="userData.is_associate_with_bundle_plan == 1" style="font-weight: bold;">'minute plan'</small> <small *ngIf="userData.is_associate_with_bundle_plan == 1">.To change click here <a  style="color: white; font-weight:600; background: blue;padding: 2px;" (click)="closedUserInfoDailogBox()" routerLink="package/view" [queryParams]="{ proId: 1, pId: pbx_package_id }">here</a></small> -->
         <!-- <small *ngIf="userData.is_associate_with_bundle_plan == 1" style="color: blue; font-weight:600">*Note</small><small *ngIf="userData.is_associate_with_bundle_plan == 1"> To change the Circle of Package and Customer click <a  style="color: white; font-weight:600; background: blue;padding: 2px;" (click)="closedUserInfoDailogBox()" routerLink="package/view" [queryParams]="{ proId: 1, pId: pbx_package_id }">here</a></small>
        </div> -->
    </div>

    <div class="form-group col-md-3" *ngIf="showPbx && (userRole==0 || userRole==2 || userRole==3) && userData.is_circle && ReadCountry" style="margin-top: -7px; margin-left: 97px;">
      <ejs-dropdownlist id="dldelement" [floatLabelType]="'Auto'" formControlName="circle"  (filtering)="Circleremovedspace($event)" style="width: 80%;" (ngModelChange)="onCircleSelect()" [dataSource]='circleList' [fields]='fields2' [(ngModel)]="userData.circle_id" [disabled]="userData.is_associate_with_bundle_plan == 1"
      [popupHeight]='popupHeight' [popupWidth]='popupWidth'  [placeholder]="placeholder9" allowFiltering=true>
    </ejs-dropdownlist>
        <!-- <mat-form-field style="width: 70%; border-top: 0px !important;">
            <mat-label>Circle Name</mat-label>
            <mat-select formControlName="circle" (openedChange)="HandleDropdownFilter('filterCircle',CircleFilter)" [(ngModel)]="userData.circle_id" (selectionChange)="onCircleSelect()" [disabled]="userData.is_associate_with_bundle_plan == 1" #select1>
              <mat-select-filter *ngIf="select1.focused" [array]="circleList" [displayMember]="'name'" (filteredReturn)="filterCircle = $event"></mat-select-filter>
              <mat-option *ngFor='let c of filterCircle' [value]="c.id">
                    {{c?.name }}
                  </mat-option>
            </mat-select>
        </mat-form-field> -->
        <div style="margin-top: 2px;" *ngIf="userForm.get('circle').invalid && (userForm.get('circle').dirty || userForm.get('circle').touched )" class="reqired-field">
            <div *ngIf="userForm.get('circle').errors.required"> Required Field</div>
        </div>
    </div>

 

        <div class="hr-sect">COMPANY SERVICES</div>

        <div class="form-group col-md-4">
          <mat-form-field class="example-full-width">
            <input matInput type="text" [(ngModel)]="userData.company_name" formControlName="company" id="company"
              placeholder="Company Name" autocomplete="off" [readonly]="userRole==4  || userRole==5">
          </mat-form-field>
          <div *ngIf="company.invalid && (company.dirty || company.touched)" class="reqired-field">
            <div *ngIf="company.errors.required">
              Required Field
            </div>
          </div>
        </div>

        <div class="form-group col-md-4">
          <mat-form-field class="example-full-width">
            <input matInput type="text" [(ngModel)]="userData.phone" (keypress)="commonService.numberOnly($event)"
              formControlName="company_phone" id="company-phone" placeholder="Company phone number" maxlength="15"
              minlength="10" [readonly]="userRole==4  || userRole==5" autocomplete="off" >
          </mat-form-field>
          <div *ngIf="company_phone.invalid && (company_phone.dirty || company_phone.touched )" class="reqired-field">
            <div *ngIf="company_phone.errors.minlength || company_phone.errors.maxlength || company_phone.errors.min">
              Number can not start with 0 and not less than 10 digits.
            </div>
          </div>
        </div>

        <div class="form-group col-md-4">
          <mat-form-field class="example-full-width">
            <input matInput type="text" [(ngModel)]="userData.domain" formControlName="domain" placeholder="Domain Name"
              maxlength="50" [readonly]="userRole==4  || userRole==5" autocomplete="off" appBlockCopyPaste>
          </mat-form-field>
        </div>

        <div class="form-group col-md-4">
          <mat-form-field class="example-full-width">
            <textarea matInput [(ngModel)]="userData.company_address" formControlName="company_address"
              placeholder="Company Address" maxlength="200" [readonly]="userRole==4  || userRole==5"
              style="resize:none;" autocomplete="off" ></textarea>
          </mat-form-field>
        </div>

        <!-- *ngIf="userRole==4 || userRole==5" -->
        <div class="form-group col-md-4" *ngIf="userRole==4 || userRole==5">
          <mat-form-field>
            <mat-label>Status</mat-label>
            <mat-select formControlName="status" disabled [(ngModel)]="userData.status">
              <mat-option value="0">Inactive</mat-option>
              <mat-option value="1">Active</mat-option>
              <mat-option value="2">Deleted</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

       
        <!-- *ngIf="userRole==4 && userRole==5" -->
        <div class="form-group col-md-4" *ngIf="userRole==4 || userRole==5 && ReadCountry" style="margin-top: -7px;">
          <ejs-dropdownlist id="dldelement" [floatLabelType]="'Auto'" [readonly]="ReadCountry" (filtering)="Managerremovedspace($event)" formControlName="account_manager" style="width: 63%;" [dataSource]='managerArr' [fields]='fields1' [(ngModel)]="userData.account_manager_id"
          [popupHeight]='popupHeight' [popupWidth]='popupWidth'  [placeholder]="placeholder1" allowFiltering=true>
        </ejs-dropdownlist>
          <!-- <mat-form-field>
            <mat-label>Account Manager</mat-label>
            <mat-select formControlName="account_manager" (openedChange)="HandleDropdownFilter('filterAccount',AcountFilter)" filterAccount [(ngModel)]='userData.account_manager_id' #select1 required disabled>
              <mat-select-filter *ngIf="select1.focused" [array]="managerArr" [displayMember]="'first_name'" (filteredReturn)="filterAccount = $event"></mat-select-filter>
              <mat-option *ngFor='let manager of filterAccount' [value]="manager.id">{{manager.first_name}}
                {{manager.last_name}}</mat-option>
            </mat-select>
          </mat-form-field> -->
        </div>


        <div class="form-group col-md-4" *ngIf="userRole!=4  && userRole!=5">
          <mat-form-field class="example-full-width">
            <input matInput type="text" maxlength="15" formControlName="gst_number" placeholder="Company GST number"
              [(ngModel)]="userData.company_gst_number" style="text-transform: uppercase;" autocomplete="off"
              >
          </mat-form-field>
          <div *ngIf="gst_number.invalid && (gst_number.dirty || gst_number.touched)" class="reqired-field">
            <div *ngIf="gst_number.errors.pattern">
              Invalid GST number
            </div>
          </div>
        </div>
        <div class="form-group col-md-4" *ngIf="userRole!=4  && userRole!=5">
          <mat-form-field class="example-full-width">
            <input matInput type="text" maxlength="15" maxlength="15" formControlName="pan_number"
              placeholder="Company PAN number" [(ngModel)]="userData.pan_number" style="text-transform: uppercase;"
              autocomplete="off">
          </mat-form-field>
          <!-- <div *ngIf="gst_number.invalid && (gst_number.dirty || gst_number.touched)" class="reqired-field">
            <div *ngIf="gst_number.errors.pattern">
              Invalid GST number
            </div>
          </div> -->
        </div>
        <div class="form-group col-md-4" *ngIf="userRole!=4  && userRole!=5">
          <mat-form-field class="example-full-width">
            <input matInput type="text" maxlength="15" maxlength="15" formControlName="p_i_number"
              placeholder="Company PI number" [(ngModel)]="userData.po_number" style="text-transform: uppercase;"
              autocomplete="off">
          </mat-form-field>
          <!-- <div *ngIf="gst_number.invalid && (gst_number.dirty || gst_number.touched)" class="reqired-field">
            <div *ngIf="gst_number.errors.pattern">
              Invalid GST number
            </div>
          </div> -->
        </div>
        <div class="form-group col-md-4" *ngIf="userRole!=4  && userRole!=5">
          <mat-form-field class="example-full-width">
            <input matInput type="text" maxlength="15" maxlength="15" formControlName="p_o_number"
              placeholder="Company PO number" [(ngModel)]="userData.pi_number" style="text-transform: uppercase;"
              autocomplete="off">
          </mat-form-field>
          <!-- <div *ngIf="gst_number.invalid && (gst_number.dirty || gst_number.touched)" class="reqired-field">
            <div *ngIf="gst_number.errors.pattern">
              Invalid GST number
            </div>
          </div> -->
        </div>

        
  

        <div class="hr-sect">ACCOUNT SERVICES</div>

        <!-- <div class="form-group col-md-4" *ngIf="defaultDate">  
          <mat-form-field>
            <input matInput [matDatepicker]="picker" [min]="minDate" placeholder="Account Expiry" formControlName="date"
            [(ngModel)]="assignDefaultDate" readonly>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker readonly="false"></mat-datepicker>
          </mat-form-field>
        </div> -->

     



        <div class="form-group col-md-4" *ngIf="userRole!=4  && userRole!=5" style="margin-top: -7px;">
          <ejs-dropdownlist id="dldelement" [floatLabelType]="'Auto'" formControlName="dialout_group" (filtering)="Dialoutremovedspace($event)" style="width: 63%;" [dataSource]='dialoutGroupList' [fields]='fields2' [(ngModel)]="dialout_id"
          [popupHeight]='popupHeight' [popupWidth]='popupWidth'  [placeholder]="placeholder10" allowFiltering=true>
        </ejs-dropdownlist>
        <!-- <div *ngIf="userForm.controls['dialout_group'].invalid && (userForm.controls['dialout_group'].dirty || userForm.controls['dialout_group'].touched)"
        class="alert">
        <div *ngIf="userForm.controls['dialout_group'].errors.required"
            style="margin-top: -12px; margin-left:-20px; color:red;">
            Required Field
        </div>
    </div> -->
          <!-- <mat-form-field class="example-full-width" >
            <mat-label>Dialout Group</mat-label>
            <mat-select  [(ngModel)]="userData.dialout_group" (openedChange)="HandleDropdownFilter('filterDial',DialoutFilter)" formControlName="dialout_group" #select1 required>
              <mat-select-filter *ngIf="select1.focused" [array]="dialoutGroupList" [displayMember]="'name'" (filteredReturn)="filterDial = $event"></mat-select-filter>
              <mat-option [value]="">Select</mat-option>
                <mat-option *ngFor='let cp of filterDial' [value]="cp.id">
                    {{ cp.name }}
                </mat-option>
            </mat-select>
        </mat-form-field> -->
        </div>

        <div class="col-md-4" *ngIf="userRole!=4  && userRole!=5">
          <mat-form-field class="example-full-width">
            <mat-label>Invoice day</mat-label>
            <mat-select [(ngModel)]="userData.invoice_day" formControlName="invoice_day" required>
              <!-- <mat-option value="">Select Day</mat-option> -->
              <mat-option [value]="1">1</mat-option>
              <mat-option [value]="2">2</mat-option>
              <mat-option [value]="3">3</mat-option>
              <mat-option [value]="4">4</mat-option>
              <mat-option [value]="5">5</mat-option>
              <mat-option [value]="6">6</mat-option>
              <mat-option [value]="7">7</mat-option>
              <mat-option [value]="8">8</mat-option>
              <mat-option [value]="9">9</mat-option>
              <mat-option [value]="10">10</mat-option>
              <mat-option [value]="11">11</mat-option>
              <mat-option [value]="12">12</mat-option>
              <mat-option [value]="13">13</mat-option>
              <mat-option [value]="14">14</mat-option>
              <mat-option [value]="15">15</mat-option>
              <mat-option [value]="16">16</mat-option>
              <mat-option [value]="17">17</mat-option>
              <mat-option [value]="18">18</mat-option>
              <mat-option [value]="19">19</mat-option>
              <mat-option [value]="20">20</mat-option>
              <mat-option [value]="21">21</mat-option>
              <mat-option [value]="22">22</mat-option>
              <mat-option [value]="23">23</mat-option>
              <mat-option [value]="24">24</mat-option>
              <mat-option [value]="25">25</mat-option>
              <mat-option [value]="26">26</mat-option>
              <mat-option [value]="27">27</mat-option>
              <mat-option [value]="28">28</mat-option>
            </mat-select>
          </mat-form-field>
          <!-- <div *ngIf="extension_length_limit.invalid && (extension_length_limit.dirty || extension_length_limit.touched)"
            class="reqired-field">
            <div *ngIf="extension_length_limit.errors.required">
              Required Field
            </div>
          </div> -->
        </div>

        <div class="col-md-4" *ngIf = "showPbx && (userRole==0 || userRole==2)">
          <mat-form-field class="example-full-width">
            <mat-label>Select Extension Length Limit</mat-label>
            <mat-select  [(ngModel)]="userData.extension_length_limit" formControlName="extension_length_limit" required>
              <mat-option value="">Select Length</mat-option>
              <mat-option [value]="2">2</mat-option>
              <mat-option [value]="3">3</mat-option>
              <mat-option [value]="4">4</mat-option>
              <mat-option [value]="5">5</mat-option>
              <mat-option [value]="6">6</mat-option>
            </mat-select>
          </mat-form-field>
          <div *ngIf="extension_length_limit.invalid && (extension_length_limit.dirty || extension_length_limit.touched)"
            class="reqired-field">
            <div *ngIf="extension_length_limit.errors.required">
              Required Field
            </div>
          </div>
        </div>

        <div class="col-md-4" *ngIf="userRole!=4  && userRole!=5" style="margin-top: 5px;">
          <mat-form-field class="example-full-width">
            <input matInput type="text" [(ngModel)]="userData.threshold" formControlName="threshold" placeholder="Threshold Balance" maxlength="4" (keypress)="commonService.numberOnly($event)">
          </mat-form-field>
        </div>    
       
      <div class="form-group col-md-4" style="margin-top: -10px;" *ngIf="userRole!=4  && userRole!=5">
        <mat-form-field class="example-full-width">
          <textarea matInput type="text" maxlength="300" [(ngModel)]="userData.callback_url" formControlName="callback_url" placeholder="Callback URL"></textarea>
        </mat-form-field>
      </div>
       


        <div class="form-group col-md-4  mt-2"  *ngIf="userRole!=4  && userRole!=5">
          <mat-slide-toggle [(ngModel)]="userData.dunning" formControlName="is_dunning" >
            Dunning
          </mat-slide-toggle>
        </div>

        <div class="form-group col-md-4  mt-2" style="margin-top: 9px;" *ngIf="userRole!=4  && userRole!=5">
          <mat-slide-toggle [(ngModel)]="userData.is_notification_email"   formControlName="is_notification_email" (change)="changeNotificationEmail($event)" >
            Notification Email
          </mat-slide-toggle>
        </div>

       
      <div class="form-group col-md-4" style="margin-top: -10px;" *ngIf="userRole!=4  && userRole!=5">
        <mat-form-field class="example-full-width">
          <input matInput  [(ngModel)]="userData.notification_email" type="email" formControlName="notification_email" id="email"
            placeholder="Notification Email" maxlength="40" [readonly]="!is_notification_email.value">
        </mat-form-field>
        <div *ngIf="notification_email.invalid && (notification_email.dirty || notification_email.touched)" class="reqired-field">
          <div *ngIf="notification_email.errors.required">
            Required Field
          </div>
          <div *ngIf="notification_email.errors.pattern">
            Email must be valid
          </div>
        </div>  
      </div>

        <div class="form-group col-md-4">
          <mat-slide-toggle formControlName="apiToken" [(ngModel)]="userData.apiToken" [disabled]="userRole==4  || userRole==5" (change)="api_access()">
           API Access
          </mat-slide-toggle>
      </div>

      <div class="col-md-4" style="margin-top: -10px;" *ngIf="api_hits || userData.apiToken==true">
        <mat-form-field class="example-full-width">
          <input matInput type="number" formControlName="request_hit" placeholder="API Hits" [(ngModel)]="userData.total_hit">
        </mat-form-field>
        <div *ngIf="request_hit.invalid && (request_hit.dirty || request_hit.touched)"
        class="reqired-field">
        <div *ngIf="request_hit.errors.pattern">
          Maximum Limit is up to 5000.
        </div>
      </div>
      </div>

      <div class="col-md-4" style="margin-top: 5px;" *ngIf="api_hits || userData.apiToken==true">
        <mat-form-field class="example-full-width">
          <input matInput type="number" placeholder="Consume Hit" [style.color]="dynamicColorCoding ? 'red' : 'green'" [(ngModel)]="userData.consume_hit" readonly [ngModelOptions]="{standalone: true}">
        </mat-form-field>
      </div>

      <div class="form-group col-md-3" >
        <mat-slide-toggle formControlName="isSetDate" [(ngModel)]="userData.is_SetDate" [disabled]="userRole==4  || userRole==5" (change)="isChnageDate($event)">
          Account Expiry Date
        </mat-slide-toggle>
      </div>

      <div class="form-group col-md-4" *ngIf="userData.is_SetDate" style="margin-top: -15px; margin-left: 92px;">
        <mat-form-field>
          <input matInput [matDatepicker]="picker" [min]="minDate" placeholder="Account Expiry" formControlName="date"
           [(ngModel)]="todayDate" [disabled]="userRole==4  || userRole==5" readonly>
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker readonly="false"></mat-datepicker>
        </mat-form-field>
          <div *ngIf="date.invalid && (date.dirty || date.touched)" class="reqired-field">
          <div *ngIf="date.errors.required">
            Required Field
         </div>
        </div>
      </div>

      <!-- <div class="col-md-4" *ngIf="userRole!=4  && userRole!=5">
        <div class="form-group" *ngIf="isCredtiLimit">
          <mat-form-field class="example-full-width">
            <input matInput type="text" [(ngModel)]="userData.credit_limit" formControlName="credit_limit"
              (keypress)="commonService.floatOnly($event)" placeholder="Credit Limit" (input)="checkPatternnn($event)" maxlength="9"
              autocomplete="off" appBlockCopyPaste required>
          </mat-form-field>
          <div *ngIf="credit_limit.invalid && (credit_limit.dirty || credit_limit.touched)" class="reqired-field">
            <div *ngIf="credit_limit.errors.required">
              Required Field
            </div>
            <div *ngIf="credit_limit.errors.pattern">
              Number Range should be 1 to 999999.99
            </div>
          </div>
        </div>
      </div> -->
      <br />

      <div class="form-group col-md-8 ">
        <section class="example-section">
          Threshold Balance Notification :
          <mat-checkbox class="col-md-4" formControlName="threshold_fifty" [(ngModel)]="isFifty" [disabled]="userRole == 5 || customerMenu.all_permission == 0" >50%</mat-checkbox>
          <mat-checkbox class="col-md-4"formControlName="threshold_seventyFive" [(ngModel)]="isSeventyFive" [disabled]="userRole == 5 ||customerMenu.all_permission == 0">75%</mat-checkbox>
          <mat-checkbox class="col-md-4"formControlName="threshold_ninety" [(ngModel)]="isNinety" [disabled]="userRole == 5 || customerMenu.all_permission == 0">90%</mat-checkbox>
        </section>
      </div>


      <div class="hr-sect">CALL SERVICES</div>

     

        <!-- <div class="form-group col-md-4  mt-2" *ngIf="userRole!=4  && userRole!=5">
          <mat-slide-toggle [(ngModel)]="userData.dunning" formControlName="is_dunning" (change)="changeDunning($event)">
            Dunning
          </mat-slide-toggle>
        </div> -->
     

        <!-- <div class="form-group col-md-4  mt-2" *ngIf="userRole!=4  && userRole!=5">
          <mat-slide-toggle [(ngModel)]="userData.is_notification_email"   formControlName="is_notification_email" (change)="changeNotificationEmail($event)" [disabled]="dunning || email_disable">
            Notification Email
          </mat-slide-toggle>
        </div> -->
           

        <div class="form-group col-md-4" *ngIf="isIndia && (userRole==0 || userRole==2)">
          <mat-slide-toggle formControlName="cli_type" [(ngModel)]="cli_type_tog"
              style="margin-top: 13px;">FLN/VMN</mat-slide-toggle>
              <div class="hrt" style="width:820px;">
              </div>
        </div>
        <div class="form-group col-md-3" *ngIf="(userRole==4 || userRole==5)">
          <mat-slide-toggle formControlName="cli_type" [(ngModel)]="userData.is_circle" [disabled]="userRole==4  || userRole==5" [(ngModel)]="cli_type_tog" style="margin-top: 13px;">
            FLN/VMN
          </mat-slide-toggle>
        </div>

        <div class="col-md-4" *ngIf="userRole!=4  && userRole!=5">
          <mat-form-field class="example-full-width">
            <input matInput [(ngModel)]="userData.monthly_international_threshold"  type="text" formControlName="monthly_international_threshold" placeholder="International Call Limit" maxlength="3" (keypress)="commonService.numberOnly($event)">
          </mat-form-field>
        </div>

        <div class="form-group col-md-4  mt-2" *ngIf = "showPbx">
          <mat-slide-toggle formControlName="plugin" [(ngModel)]="is_plugin" [disabled]="userRole==4  || userRole==5">
           Plugin
          </mat-slide-toggle>
        </div>

        <div class="form-group col-md-4  mt-2" *ngIf = "showPbx">
          <mat-slide-toggle formControlName="intercom_calling" [(ngModel)]="userData.intercom_calling" [disabled]="userRole==4  || userRole==5">
           Intercom Calling
          </mat-slide-toggle>
        </div>
    
        <div class="form-group col-md-4  mt-2" *ngIf = "showPbx">
          <mat-slide-toggle formControlName="enterprise_directory" [(ngModel)]="userData.enterprise_directory" [disabled]="userRole==4  || userRole==5">
           Enterprise Directory
          </mat-slide-toggle>
        </div>

        <!-- <div class="col-md-4">
          <mat-form-field>
            <mat-label>IP</mat-label>
             <input matInput type="text" id="ip" formControlName="ip" (keydown.space)="$event.preventDefault();"
             placeholder="IP" (change)="checkValidIP($event)" maxlength="40" [(ngModel)]="userData.ip"
            autocomplete="off" [readonly]="userRole==4  || userRole==5">
          </mat-form-field> -->
          <!-- <div *ngIf="ip.invalid && (ip.dirty || ip.touched)" class="reqired-field">
            <div *ngIf="ip.errors.required">
              Required Field
           </div>
          </div> -->
        <!-- </div> -->

        <!-- <div class="form-group col-md-4 mt-2 " *ngIf="userData.country_code == '+91'">
          <mat-slide-toggle formControlName="is_Li" [(ngModel)]="userData.is_li" (change)="changeLi($event)">
            Li
          </mat-slide-toggle>
        </div>
        <div class="form-group col-md-4 mt-2"*ngIf="userData.country_code == '+91'">
          <mat-form-field class="example-full-width">
            <mat-label>Li text</mat-label>
            <input matInput type="text" [(ngModel)]="userData.li_code" formControlName="Li" id="Li" maxlength="50"
              placeholder="Li text"  autocomplete="off"  disabled="!gatewayData.is_Li" >
          </mat-form-field>
        </div> -->


       
      </div>

      <div class="hr-sect">PRODUCT SELECTION GROUP</div>


      <div class="row checkboxes">
        <div class="col-md-12" *ngFor='let product of products; let i = index'>
            <label>
              <mat-checkbox [checked]="product.active" (change)="chooseProduct($event)"
                value="{{product.id}}" [disabled]="product.active || userRole == '5' || customerMenu.all_permission == 0" required >
                {{product.name}}
              </mat-checkbox>

            </label>
         
        </div>

      <!-- circle-----------------circle-------------------circle----------------circle----------------circle -->

     
   
   
    <div class="form-group col-md-3" *ngIf="showPbx && (userRole==4 || userRole==5) && userData.country_code == '+91'">
      <mat-slide-toggle formControlName="isCircle" [(ngModel)]="userData.is_circle" [disabled]="userRole==4  || userRole==5" (change)="isChnageCircle($event)">
        Circle
      </mat-slide-toggle>
    </div>

  
 
    <div class="form-group col-md-3" *ngIf="showPbx && (userRole==4 || userRole==5) && userData.is_circle && ReadCountry" style="margin-top: -7px;">
      <ejs-dropdownlist id="dldelement" [floatLabelType]="'Auto'" formControlName="circle" [readonly]="ReadCountry" (filtering)="Circleremovedspace($event)" (ngModelChange)="onCircleSelect()"  style="width: 80%;" [dataSource]='circleList' [fields]='fields2' [(ngModel)]="userData.circle_id" [disabled]="userRole==4  || userRole==5"
      [popupHeight]='popupHeight' [popupWidth]='popupWidth'  [placeholder]="placeholder9" allowFiltering=true >
    </ejs-dropdownlist>
      <!-- <mat-form-field style="width: 70%; border-top: 0px !important;">
        <mat-label>Circle Name</mat-label>
        <mat-select formControlName="circle" (openedChange)="HandleDropdownFilter('filterCircle',CircleFilter)" [(ngModel)]="userData.circle_id" (selectionChange)="onCircleSelect()" [disabled]="userRole==4  || userRole==5" #select1>
          <mat-select-filter *ngIf="select1.focused" [array]="circleList" [displayMember]="'name'" (filteredReturn)="filterCircle = $event"></mat-select-filter>
          <mat-option *ngFor='let c of filterCircle' [value]="c.id">
            {{c?.name }}
          </mat-option>
        </mat-select>
      </mat-form-field> -->
      <div *ngIf="userForm.get('circle').invalid && (userForm.get('circle').dirty || userForm.get('circle').touched )"
        class="reqired-field">
        <div *ngIf="userForm.get('circle').errors.required"> Required Field</div>
      </div>
    </div>
   


        <!-- pbx-----------------pbx-------------------pbx----------------pbx----------------pbx -->
       

       

        <div class="form-group col-md-3" *ngIf="showPbx && (userRole==4 || userRole==5) && ReadCountry" style="margin-top: -7px;">
          <ejs-dropdownlist id="dldelement" [floatLabelType]="'Auto'" formControlName="pbx_package_name" (filtering)="PBXremovedspace($event)" style="width: 80%;" [dataSource]='billingType' [fields]='fields2' [(ngModel)]="pbx_package_id"
          [popupHeight]='popupHeight' [popupWidth]='popupWidth' [placeholder]="placeholder11" allowFiltering=true [readonly]="userRole == '5'">
        </ejs-dropdownlist>
          <!-- <mat-form-field>
            <mat-label>Select PBX Package</mat-label>
            <mat-select formControlName="pbx_package_name" [(ngModel)]='pbx_package_id' [disabled]="userRole==4  || userRole==5" required>
              <mat-option *ngFor='let package of billingType | orderBy:"name"' [value]="package.id">
                {{ package.name }}
              </mat-option>
            </mat-select>
          </mat-form-field> -->
        </div>

     

        <div class="form-group col-md-3" *ngIf="showOc && (userRole==4 || userRole==5) && ReadCountry" style="margin-top: -7px;">
          <ejs-dropdownlist id="dldelement" [floatLabelType]="'Auto'"  [readonly]="ReadCountry" formControlName="oc_package_name"  (filtering)="Packageremovedspace($event)" style="width: 80%;" [dataSource]='ocPackage' [fields]='fields2' [(ngModel)]="oc_package_id"
          [popupHeight]='popupHeight' [popupWidth]='popupWidth' [placeholder]="placeholder12" allowFiltering=true>
        </ejs-dropdownlist>
          <!-- <mat-form-field>
            <mat-label>Select OC Package</mat-label>
            <mat-select formControlName="oc_package_name" [(ngModel)]='oc_package_id'  [disabled]="userRole==4" required>
              <mat-option *ngFor='let ocPackage of ocPackage | orderBy:"name"' [value]="ocPackage.id">
                {{ ocPackage.name }}
              </mat-option>
            </mat-select>
          </mat-form-field> -->
        </div>
     

   

      <!-- <div class="form-group col-md-4">
        <mat-form-field>
          <mat-label>API Token</mat-label>
          <input matInput [type]="hide ? 'password' : 'text'" formControlName="token" [(ngModel)]="userData.token" readonly>
          <button type="button" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hide">
            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button> -->
          <!-- <button type="button" title="Refresh" mat-icon-button matSuffix (click)="refreshToken()">
            <mat-icon>autorenew</mat-icon>
          </button> -->
        <!-- </mat-form-field>
      </div> -->
      <div class="form-group col-md-3" *ngIf="showPbx && (userRole==0 || userRole==2 || userRole==3) && ReadCountry" style="margin-top: 8px;">
        <!-- <ejs-dropdownlist id="dldelement" [floatLabelType]="'Auto'" formControlName="pbx_package_name" [readonly]="true" (filtering)="PBXremovedspace($event)" style="width: 80%;" [dataSource]='billingType' [fields]='fields2' [(ngModel)]="pbx_package_id"
        [popupHeight]='popupHeight' [popupWidth]='popupWidth' (change)="selectPBXPackage($event)"  [placeholder]="placeholder11" allowFiltering=true >
      </ejs-dropdownlist> -->
      <b>PBX Pacakge:</b>
      {{userData.package_name}}
        <!-- <mat-form-field>
          <mat-label>Select PBX Package</mat-label>
          <mat-select formControlName="pbx_package_name" (openedChange)="HandleDropdownFilter('filterPBXP',PBXPFilter)" [(ngModel)]='pbx_package_id'
            (selectionChange)="selectPBXPackage($event)"  [disabled]="userData.is_associate_with_bundle_plan == 1" #select1 required>
            <mat-select-filter  *ngIf="select1.focused" [array]="billingType" [displayMember]="'name'" (filteredReturn)="filterPBXP = $event" ></mat-select-filter>
            <mat-option *ngFor='let package of filterPBXP | orderBy:"name"' [value]='package.id'>{{ package.name }}</mat-option>
          </mat-select>
        </mat-form-field> -->
        <!-- <div class="form-group col-md-12"> -->
          <!-- <small *ngIf="userData.is_associate_with_bundle_plan == 1" style="color: blue; font-weight:600">*Note</small><small *ngIf="userData.is_associate_with_bundle_plan == 1"> Package is associate with 'minute plan'.To change click here <a  style="color: white; font-weight:600; background: blue;padding: 2px;" (click)="closedUserInfoDailogBox()" routerLink="package/view" [queryParams]="{ proId: 1, pId: pbx_package_id }">here</a></small> -->
          <!-- <div >
           <small *ngIf="userData.is_associate_with_bundle_plan == 1" style="color: blue; font-weight:600">*Note</small><small *ngIf="userData.is_associate_with_bundle_plan == 1"> Package is associate with </small> <small *ngIf="userData.is_associate_with_bundle_plan == 1" style="font-weight: bold;">'minute plan'</small> <small *ngIf="userData.is_associate_with_bundle_plan == 1">.To change click here <a  style="color: white; font-weight:600; background: blue;padding: 2px;" (click)="closedUserInfoDailogBox()" routerLink="package/view" [queryParams]="{ proId: 1, pId: pbx_package_id }">here</a></small>
          </div> -->
      </div>
    

      <div class="form-group col-md-3" *ngIf="showOc && (userRole==0 || userRole==2)" style="margin-top: -66px;margin-left: -5px; ">
        <ejs-dropdownlist id="dldelement" [floatLabelType]="'Auto'" formControlName="oc_package_name"  (filtering)="Packageremovedspace($event)" style="width: 80%;" [dataSource]='ocPackage' [fields]='fields2' [(ngModel)]="oc_package_id"
        [popupHeight]='popupHeight' [popupWidth]='popupWidth' [placeholder]="placeholder12" allowFiltering=true>
      </ejs-dropdownlist>
        <!-- <mat-form-field>
          <mat-label>Select OC Package</mat-label>
          <mat-select formControlName="oc_package_name" [(ngModel)]='oc_package_id' required>
            <mat-option *ngFor='let ocPackage of ocPackage | orderBy:"name"' [value]="ocPackage.id">
              {{ ocPackage.name }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
      </div>


    </div>
    <app-grid [columnDefs]="columnDefs" [dataSource]="dataSource"  [suppressColumnFit]="true" [isSupressPagination]="true"
    [pageSize]='defaultPageSize' (actionClick)="manageAction($event)" >
    </app-grid>
      <!-- <div class="form-group col-md-12">
      <small style="color: blue; font-weight:600">*Note</small><small> Package will be listing as per provisioning of customer account only. Like if Standard Package was provisioned then only Standard Package will show in drop-down.</small>
    </div> -->
      <div class="btn-group col-lg-12 example-button-row" style="margin-top: 12px;">
        <!-- <button type="submit" [disabled]="!userForm.valid" class="btn btn-primary">Submit</button> -->
        <div *ngIf="userRole!=4 && userRole!=5">
          <button mat-raised-button [disabled]="!userForm.valid" (click)="submitUserForm()"
            color="primary">Submit</button>
        </div>
        <button mat-raised-button color="warn" (click)="onNoClick($event)">Cancel</button>
        <!-- <button backButton mat-raised-button color="primary"><i class="fa fa-reply fa-fw"></i>Back</button> -->
      </div>
      <!-- <small class="reqired-field">(*) Mandatory Fields.</small> -->
    </form>
  </div>