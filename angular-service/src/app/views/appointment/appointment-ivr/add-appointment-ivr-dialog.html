<h3 class="card-header-style"> {{data['id'] ? 'Edit':'Add'}} Appointment </h3>
<div mat-dialog-content>
  <div class="card-body">
    <form [formGroup]="basicIVRForm" (ngSubmit)="submitbasicIVRForm()" class="row">
      <div class="form-group col-md-4">
        <mat-form-field class="example-full-width">
          <mat-label>Name</mat-label>
          <input matInput placeholder="Name" formControlName="name" maxlength="50"
            (keypress)="commonService.charOnly($event)" autocomplete="off" appBlockCopyPaste required>
        </mat-form-field>
        <div *ngIf="name.invalid && (name.dirty || name.touched)" class="reqired-field">
          <div *ngIf="name.errors.required">
            Required Field
          </div>
        </div>
      </div>
      <div class="form-group col-md-4" style="margin-top:-15px;">
        
        <ejs-dropdownlist  
         formControlName="welcome_prompt" (filtering)="Countryremovedspace($event)" [disabled]="welcomePrompt!=1"
        style="width: 100%;" [dataSource]='selectedIVRValue' [fields]='fields1' [floatLabelType]="'Auto'"
        [popupHeight]='popupHeight' [popupWidth]='popupWidth' [placeholder]='placeholder1' allowFiltering=true>
    </ejs-dropdownlist> 
        <!-- <mat-form-field>
          <mat-label>Welcome Prompt</mat-label>
          <mat-select formControlName="welcome_prompt" (openedChange)="HandleDropdownFilter('filterPrompt',PromptFilter)" [disabled]="welcomePrompt!=1" required #select0>
            <mat-select-filter *ngIf="select0.focused" [array]="selectedIVRValue" [displayMember]="'prompt_name'" (filteredReturn)="filterPrompt = $event"></mat-select-filter>
            <mat-option value="" selected>Select Prompt</mat-option>
            <mat-option *ngFor='let ivr of filterPrompt' [value]="ivr.id">
              {{ ivr.prompt_name }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <div style="margin-top:2px;"
          *ngIf="basicIVRForm.get('welcome_prompt').invalid && (basicIVRForm.get('welcome_prompt').dirty || basicIVRForm.get('welcome_prompt').touched)"
          class="reqired-field">
          <div *ngIf="basicIVRForm.get('welcome_prompt').errors.required">
            Required Field
          </div>
        </div>
      </div>
      <!-- <div class="form-group col-md-4">
                <mat-form-field>
                  <mat-label>Selection Prompt</mat-label>
                  <mat-select formControlName="repeat_prompt" [disabled]="welcomePrompt!=1">
                    <mat-option   value="" selected>Select Prompt</mat-option>
                    <mat-option *ngFor='let ivr of selectedIVRValue' [value]="ivr.id">
                      {{ ivr.prompt_name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div> -->
      <div class="form-group col-md-4" style="margin-top:-15px;">
        <ejs-dropdownlist  
        formControlName="invalid_prompt" (filtering)="Countryremovedspace($event)" [disabled]="welcomePrompt!=1"
       style="width: 100%;" [dataSource]='selectedIVRValue' [fields]='fields1' [floatLabelType]="'Auto'"
       [popupHeight]='popupHeight' [popupWidth]='popupWidth' [placeholder]='placeholder4' allowFiltering=true>
   </ejs-dropdownlist> 
        <!-- <mat-form-field>
          <mat-label>Invalid Prompt</mat-label>
          <mat-select formControlName="invalid_prompt" (openedChange)="HandleDropdownFilter('filterInvalid',InvalidFilter)" [disabled]="welcomePrompt!=1" #select1>
            <mat-select-filter *ngIf="select1.focused" [array]="selectedIVRValue" [displayMember]="'prompt_name'" (filteredReturn)="filterInvalid = $event"></mat-select-filter>
            <mat-option value='0'>Select Prompt</mat-option>
            <mat-option value='1' selected>Default</mat-option>
            <mat-option *ngFor='let ivr of filterInvalid' [value]="ivr.id">
              {{ ivr.prompt_name }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <div style="margin-top:2px;"
        *ngIf="basicIVRForm.get('invalid_prompt').invalid && (basicIVRForm.get('invalid_prompt').dirty || basicIVRForm.get('invalid_prompt').touched)"
        class="reqired-field">
        <div *ngIf="basicIVRForm.get('invalid_prompt').errors.required">
          Required Field
        </div>
      </div>
      </div>
      <div class="form-group col-md-4" style="margin-top:-15px;">
        <ejs-dropdownlist  [floatLabelType]="'Auto'"
        formControlName="timeout_prompt" (filtering)="Countryremovedspace($event)" [disabled]="welcomePrompt!=1"
       style="width: 100%;" [dataSource]='selectedIVRValue' [fields]='fields1' 
       [popupHeight]='popupHeight' [popupWidth]='popupWidth' [placeholder]='placeholder5' allowFiltering=true>
   </ejs-dropdownlist> 
        <!-- <mat-form-field>
          <mat-label>Timeout Prompt</mat-label>
          <mat-select formControlName="timeout_prompt" (openedChange)="HandleDropdownFilter('filterTime',TimeFilter)" [disabled]="welcomePrompt!=1" #select2>
            <mat-select-filter *ngIf="select2.focused" [array]="selectedIVRValue" [displayMember]="'prompt_name'" (filteredReturn)="filterTime = $event"></mat-select-filter>
            <mat-option value='0'>Select Prompt</mat-option>
            <mat-option value='1' selected>Default</mat-option>
            <mat-option *ngFor='let ivr of filterTime' [value]="ivr.id">
              {{ ivr.prompt_name }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <div style="margin-top:2px;"
        *ngIf="basicIVRForm.get('timeout_prompt').invalid && (basicIVRForm.get('timeout_prompt').dirty || basicIVRForm.get('timeout_prompt').touched)"
        class="reqired-field">
        <div *ngIf="basicIVRForm.get('timeout_prompt').errors.required">
          Required Field
        </div>
      </div>
      </div>
      <div class="form-group col-md-4">
        <mat-form-field class="example-full-width">
          <mat-label>Digits Timeout(Sec)</mat-label>
          <input matInput placeholder="Digit Timeout(Sec)" formControlName="digit_timeout" maxlength="2"
            (keypress)="commonService.numberOnly($event)" autocomplete="off" appBlockCopyPaste required>
        </mat-form-field>
        <div *ngIf="digit_timeout.invalid && (digit_timeout.dirty || digit_timeout.touched)" class="reqired-field">
          <div *ngIf="digit_timeout.errors.required">
            Required Field
          </div>
          <div *ngIf="digit_timeout.errors.max">Digits timeout can't be more than 60</div>
          <div *ngIf="digit_timeout.errors.min">Digits timeout can't be less than 1</div>
        </div>
      </div>
      <div class="form-group col-md-4">
        <mat-form-field class="example-full-width">
          <mat-label>Intermediate Digits Timeout(Sec)</mat-label>
          <input matInput placeholder="Inter-Digit Timeout(Sec)" formControlName="inter_digit_timeout" maxlength="2"
            (keypress)="commonService.numberOnly($event)" autocomplete="off" appBlockCopyPaste required>
        </mat-form-field>
        <div *ngIf="inter_digit_timeout.invalid && (inter_digit_timeout.dirty || inter_digit_timeout.touched)"
          class="reqired-field">
          <div *ngIf="inter_digit_timeout.errors.required">
            Required Field
          </div>
          <div *ngIf="inter_digit_timeout.errors.max">Intermediate Digits timeout can't be more than 60</div>
          <div *ngIf="inter_digit_timeout.errors.min">Intermediate Digits timeout can't be less than 1</div>
        </div>
      </div>
      <div class="form-group col-md-4">
        <mat-form-field class="example-full-width">
          <mat-label>Max Timeout Try</mat-label>
          <input matInput placeholder="Max Timeout Try" formControlName="max_timeout_try" maxlength="1"
            (keypress)="commonService.numberOnly($event)" autocomplete="off" appBlockCopyPaste required>
        </mat-form-field>
        <div *ngIf="max_timeout_try.invalid && (max_timeout_try.dirty || max_timeout_try.touched)"
          class="reqired-field">
          <div *ngIf="max_timeout_try.errors.required">
            Required Field
          </div>
          <div *ngIf="max_timeout_try.errors.max">Max timeout try can't be more than 3</div>
          <div *ngIf="max_timeout_try.errors.min">Max timeout try can't be less than 1</div>
        </div>
      </div>
      <div class="form-group col-md-4">
        <mat-form-field class="example-full-width">
          <mat-label>Max Invalid Try</mat-label>
          <input matInput placeholder="Max Invalid Try" formControlName="max_invalid_try" maxlength="1"
            (keypress)="commonService.numberOnly($event)" autocomplete="off"   required>
        </mat-form-field>
        <div *ngIf="max_invalid_try.invalid && (max_invalid_try.dirty || max_invalid_try.touched)"
          class="reqired-field">
          <div *ngIf="max_invalid_try.errors.required">
            Required Field
          </div>
          <div *ngIf="max_invalid_try.errors.max">Max invalid try can't be more than 3</div>
          <div *ngIf="max_invalid_try.errors.min">Max invalid try can't be less than 1</div>
        </div>
      </div>
       <div class="form-group col-md-4">
        <mat-form-field class="example-full-width">
          <mat-label>Open Time</mat-label>
          <input matInput  [ngxTimepicker]="picker" [format]="24" formControlName= "open_time"  autocomplete="off" required    [(ngModel)]="Open_time" >
          <ngx-material-timepicker #picker (timeSet)="onTimeSelect($event)"></ngx-material-timepicker>
        </mat-form-field>
        </div>
          <div class="form-group col-md-4">
          <mat-form-field >
            <mat-label>Close Time</mat-label>
            <input matInput  [ngxTimepicker]="picker1" [format]="24" formControlName="close_time" autocomplete="off" required   [(ngModel)]="Close_time" >
            <ngx-material-timepicker #picker1 (timeSet)="onTimeSelect($event)"></ngx-material-timepicker>
          </mat-form-field>
          </div>  
          <div class="form-group col-md-4">
            <mat-form-field class="example-full-width">
              <mat-label>Time Break </mat-label>
              <input matInput   [ngxTimepicker]="picker3" [format]="24" formControlName="time_break_start" autocomplete="off" required  [(ngModel)]="Time_break_start">
              <ngx-material-timepicker #picker3 (timeSet)="onTimeSelect($event)"></ngx-material-timepicker>
            </mat-form-field>
            </div>
            <!-- <div class="form-group col-md-4">
              <mat-form-field class="example-full-width">
                <mat-label> time_break_end</mat-label>
                <input matInput  formControlName="time_break_end" maxlength="1"  [(ngModel)]="time_break_end">
              </mat-form-field>
              </div> -->
      <div class="form-group col-md-4">
        <mat-form-field>
          <mat-label>Time Interval(Min)</mat-label>
          <mat-select formControlName="time_interval" [disabled]="this.data.id">



            <mat-option value='15'>15</mat-option>
            <mat-option value='30'>30</mat-option>
            <mat-option value='45'>45</mat-option>
            <mat-option value='60'>60</mat-option>
            <mat-option value='90'>90</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="hr-sect">Add Consultant</div>
      <!-- hr [checked]="callqueueData.is_extension" -->
      <div class="form-group col-md-12">
              <mat-checkbox class="example-margin pro-check"  formControlName="is_extension" [value]="1"
                name="is_extension"   (change)="getPackageByProductSIP($event)">SIP
              </mat-checkbox>&nbsp; &nbsp;
                <mat-checkbox class="example-margin pro-check" formControlName="is_pstn" [value]="2"
                name="is_pstn" (change)="getPackageByProductPSTN($event)">PSTN 
              </mat-checkbox>   
              
      </div>
      <div class="form-group col-md-12" *ngIf="isShowExtension" style="margin-top:-15px;">
          <ejs-multiselect id='multiselectelement' (filtering)="extensionremovedspace($event)" [floatLabelType]="'Auto'" [dataSource]='sourceAgent' [fields]='fields' [placeholder]='placeholder'
              formControlName="extension"  [popupHeight]='popupHeight' [maximumSelectionLength]='1' [popupWidth]='popupWidth' [selectAllText]='selectAllText' [mode]='mode' >
          </ejs-multiselect>
          <div *ngIf="extension.invalid && (extension.dirty || extension.touched)" class="reqired-field mt-1">
              <div *ngIf="extension.errors.required">
                  Required Field
              </div>
          </div>
      </div>
      <!-- [(ngModel)]="callqueueData.group" -->
      <div class="form-group col-md-12" *ngIf="isShowPSTN" style="margin-top:-15px;">
          <ejs-multiselect id='multiselectelement' (filtering)="groupremovedspace($event)" [floatLabelType]="'Auto'" [dataSource]='Allpstn' [fields]='fields' [placeholder]='placeholder2'
              formControlName="group"  [maximumSelectionLength]='1' (select)="selectGroup($event,true)" (removed)="selectGroup($event,false)" [popupHeight]='popupHeight' [popupWidth]='popupWidth' [mode]='mode' [selectAllText]='selectAllText'>
          </ejs-multiselect>
          <div *ngIf="group.invalid && (group.dirty || group.touched)" class="reqired-field mt-1">
              <div *ngIf="group.errors.required">
                  Required Field
              </div>
          </div>
      </div>

      <div class="col-lg-12 example-button-row">
        <button mat-raised-button type="submit" [disabled]="!basicIVRForm.valid" color="primary">Submit</button>
        <button mat-raised-button type="button" color="warn" (click)="cancelForm()">Cancel</button>
      </div>
    </form>
  </div>
</div>